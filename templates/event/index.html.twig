{% extends 'base.html.twig' %}

{% block title %}Événements Solidaires • Sanad{% endblock %}

{% block body %}
<div class="container" style="padding-top: var(--space-2xl); padding-bottom: var(--space-2xl);">
    <div class="page-intro animate-up" style="text-align: center; margin-bottom: var(--space-2xl);">
        <span class="page-label">Agenda Solidaire</span>
        <h1 class="h1-mega">Prochaines Actions</h1>
        <p class="p-lead">Découvrez les événements organisés par nos associations partenaires pour faire bouger les choses.</p>
        
        {% if is_granted('ROLE_ASSOCIATION') %}
            <div style="margin-top: var(--space-lg); display: flex; justify-content: center; gap: 15px;">
                <a href="{{ path('association_dashboard') }}" class="btn">
                    <i class="fa-solid fa-gauge-high"></i> Dashboard
                </a>
                <a href="{{ path('app_event_new') }}" class="btn btn-primary" style="padding: 12px 30px; border-radius: var(--radius-full);">
                    <i class="fa-solid fa-plus-circle"></i> Créer un Événement
                </a>
            </div>
        {% endif %}
    </div>

    <div class="case-grid animate-up delay-1">
        {% for event in events %}
            <div class="glass-panel" style="padding: 0; overflow: hidden; display: flex; flex-direction: column; transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='var(--shadow-xl)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-lg)';">
                <div style="height: 200px; position: relative;">
                    {% if event.image %}
                        <img src="{{ asset('uploads/events/' ~ event.image) }}" alt="{{ event.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                    {% else %}
                        <div style="width: 100%; height: 100%; background: var(--grad-premium); display: grid; place-items: center; color: white; font-size: 3rem;">
                            <i class="fa-solid fa-calendar-star"></i>
                        </div>
                    {% endif %}
                    <div style="position: absolute; top: 15px; right: 15px;">
                        <span class="badge" style="background: rgba(255,255,255,0.9); color: var(--brand); backdrop-filter: blur(4px);">
                            {{ event.status }}
                        </span>
                    </div>
                </div>
                
                <div style="padding: var(--space-lg); flex-grow: 1; display: flex; flex-direction: column;">
                    <div style="display: flex; gap: 10px; margin-bottom: 15px; font-size: 0.85rem; font-weight: 700; color: var(--brand);">
                        <span><i class="fa-regular fa-calendar"></i> {{ event.startAt|date('d M Y') }}</span>
                        <span><i class="fa-regular fa-clock"></i> {{ event.startAt|date('H:i') }}</span>
                    </div>
                    
                    <h3 style="font-size: 1.25rem; font-weight: 800; margin-bottom: 12px; color: var(--text);">{{ event.title }}</h3>
                    <p class="muted" style="font-size: 0.9rem; line-height: 1.6; margin-bottom: 20px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                        {{ event.description }}
                    </p>
                    
                    <div style="margin-top: auto; padding-top: 15px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 8px; font-size: 0.85rem; font-weight: 600;">
                            <i class="fa-solid fa-location-dot" style="color: var(--accent);"></i>
                            {{ event.location|default('Lieu non spécifié') }}
                        </div>
                        <a href="{{ path('app_event_show', {'id': event.id}) }}" class="btn btn-sm" style="border-radius: var(--radius-full);">Découvrir</a>
                    </div>
                </div>
            </div>
        {% else %}
            <div style="grid-column: 1 / -1; text-align: center; padding: var(--space-2xl); background: var(--bg-subtle); border-radius: var(--radius-2xl);">
                <i class="fa-solid fa-calendar-day" style="font-size: 4rem; color: var(--border-rich); margin-bottom: 20px;"></i>
                <h3>Aucun événement prévu pour le moment</h3>
                <p class="muted">Revenez bientôt pour découvrir de nouvelles actions solidaires.</p>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
